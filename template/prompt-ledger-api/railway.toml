[build]
builder = "dockerfile"
dockerfilePath = "template/prompt-ledger-api/Dockerfile"
watchPaths = ["src/**", "template/prompt-ledger-api/**", "pyproject.toml", "alembic/**"]

[deploy]
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10
startCommand = "alembic upgrade head && uvicorn prompt_ledger.api.main:app --host 0.0.0.0 --port $PORT"
