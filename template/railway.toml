[[services]]
name = "prompt-ledger-api"
rootDir = "./prompt-ledger-api"

[services.variables]
DATABASE_URL = "${{Postgres.DATABASE_URL}}"
REDIS_URL = "${{Redis.REDIS_URL}}"
OPENAI_API_KEY = "${{OPENAI_API_KEY}}"
PROMPT_LEDGER_API_KEY = "${{secret(32)}}"

[[services]]
name = "prompt-ledger-worker"
rootDir = "./prompt-ledger-worker"

[services.variables]
DATABASE_URL = "${{Postgres.DATABASE_URL}}"
REDIS_URL = "${{Redis.REDIS_URL}}"
OPENAI_API_KEY = "${{OPENAI_API_KEY}}"
PROMPT_LEDGER_API_KEY = "${{parent.PROMPT_LEDGER_API_KEY}}"

[[services]]
name = "sample-app"
rootDir = "./sample-app"

[services.variables]
PROMPT_LEDGER_URL = "https://prompt-ledger-api-${{RAILWAY_PROJECT_ID}}.up.railway.app"
PROMPT_LEDGER_API_KEY = "${{prompt-ledger-api.PROMPT_LEDGER_API_KEY}}"

[[plugins]]
type = "postgresql"

[[plugins]]
type = "redis"
